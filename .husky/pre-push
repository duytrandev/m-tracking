#!/bin/bash
# husky pre-push hook

echo "ğŸš€ Running pre-push checks..."

# Stage 1: Type check affected projects (comprehensive but incremental)
echo "\nğŸ” Type checking affected projects..."
pnpm nx affected -t type-check --parallel=3 || {
  echo "âŒ Type check failed. Please fix TypeScript errors before pushing."
  exit 1
}

# Optional: Add test execution for additional confidence
# Uncomment the following if you want tests to run on push:
# echo "\nğŸ§ª Running tests on affected projects..."
# pnpm nx affected -t test --parallel=3 || {
#   echo "âŒ Tests failed. Please fix failing tests before pushing."
#   exit 1
# }

echo "âœ… All pre-push checks passed! Ready to push.\n"
